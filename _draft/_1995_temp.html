<!doctype html>
<html lang="ja" class="no-js">
<head>
<meta charset="utf-8">
<meta name="robots" content="noindex">
<style>
/*
@import url('https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/algolia-min.css');
*/
</style>
</head>
<body>

<div id="searchbox"></div>
<div id="hits"></div>
<div id="pagination"></div>

<script src="https://cdn.jsdelivr.net/npm/algoliasearch@3.32.1/dist/algoliasearchLite.js" integrity="sha256-pMaJf0I78weeXGkRMBDO6jSulxC/q3sb0aPdtV2N8n0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@3.2.0" integrity="sha256-/8usMtTwZ01jujD7KAZctG0UMk2S2NDNirGFVBbBZCM=" crossorigin="anonymous"></script>


<script>

function hitTemplate(hit) {
var resultStr = `${hit.text.join('')}`;
//var resultStr = `${hit._highlightResult.text.value}`;
     return `
<div class="hit">
<div class="hit-content">
    <dl>
    <dt class="hit-title"><a href="${hit.url}" target="_blank">{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></dt>
    <dd class="hit-text">
        {{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}
    </dd>
    <dd class="hit-text">
        ${resultStr.slice(0, 160)}&hellip;
    </dd>
    <dd class="hit-text">
        ${hit._highlightResult.text.value}&hellip;
    </dd>
    </dl>
</div>
  `;
}
/*
const search = instantsearch({
    appId: 'IA90805VYI',
    apiKey: '9e30d633e7ae5597b0ddb7744f621017',
    indexName: 'index_2019-05-23-06',
    routing: true,
    searchParameters: {
        hitsPerPage: 5
    }
});

// initialize SearchBox
search.addWidget(
    instantsearch.widgets.searchBox({
        container: '#aa-search-input',
        placeholder: 'ver.1995を検索…',
        poweredBy: true,
    })
);

// initialize pagination
search.addWidget(
    instantsearch.widgets.pagination({
        container: '#pagination',
        maxPages: 20,
        // default is to scroll to 'body', here we disable this behavior
        scrollTo: false,
		showFirstLast: true,
		collapsible: true,
		autoHideContainer: true,
    })
);

search.start();
*/
const searchClient = algoliasearch('IA90805VYI', '9e30d633e7ae5597b0ddb7744f621017');

const search = instantsearch({
  indexName: 'index_2019-05-23-06',
  searchClient,
});

search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#searchbox',
        placeholder: 'ver.1995を検索…',
        poweredBy: true,
  })
);

search.addWidget(
    instantsearch.widgets.hits({
        container: '#hits',
        templates: {
            empty: "キーワード<em>「{{query}}」</em>では探せませんでした。",
            item(hit) {
                return `
                <dt><a href="${hit.url}" target="_blank">${hit._highlightResult.title.value}</a></dt>
                <dd>${hit.text}</dd>
            `;
            }
        },
    })
);

// initialize pagination
search.addWidget(
    instantsearch.widgets.pagination({
        container: '#pagination',
        maxPages: 20,
        // default is to scroll to 'body', here we disable this behavior
        scrollTo: false,
		showFirstLast: true,
		collapsible: true,
		autoHideContainer: true,
    })
);

search.start();

</script>

</body>
</html>
